<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monkey | Inventario Dinámico</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --monkey-orange: #f37335; --monkey-yellow: #fdc23e; --dark: #333; }
        body { font-family: 'Montserrat', sans-serif; background: #f4f4f4; padding-bottom: 100px; }
        header { background: linear-gradient(135deg, var(--monkey-orange), var(--monkey-yellow)); padding: 30px; text-align: center; color: white; border-radius: 0 0 40px 40px; }
        .logo { max-width: 150px; background: white; padding: 10px; border-radius: 15px; }
        .container { padding: 20px; max-width: 1100px; margin: auto; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        .card { background: white; border-radius: 20px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.1); text-align: center; transition: 0.3s; }
        .card img { width: 100%; height: 200px; object-fit: cover; }
        .card-body { padding: 15px; }
        .qty-controls { display: flex; justify-content: center; align-items: center; gap: 10px; margin-top: 10px; }
        .qty-btn { background: #eee; border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; font-weight: bold; }
        .cart-float { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); width: 90%; max-width: 500px; background: var(--dark); color: white; padding: 15px 25px; border-radius: 50px; display: none; justify-content: space-between; align-items: center; z-index: 1000; }
        .whatsapp-btn { background: #25d366; color: white; padding: 10px 20px; border-radius: 30px; text-decoration: none; font-weight: bold; }
        @media (max-width: 600px) { .grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

<header>
    <img src="MonkeyLogo.jpg" alt="Monkey Logo" class="logo">
    <p>Renta de Mobiliario en San Luis Río Colorado</p>
</header>

<div class="container">
    <h2 style="text-align:center; color:var(--monkey-orange); margin-bottom:20px;">Nuestro Inventario</h2>
    <div class="grid" id="inventory">
        <p style="text-align:center; grid-column: 1/-1;">Cargando mobiliario...</p>
    </div>
</div>

<div class="cart-float" id="cart">
    <span id="summary">0 productos</span>
    <a href="#" class="whatsapp-btn" id="whatsappLink"><i class="fab fa-whatsapp"></i> Cotizar</a>
</div>

<script>
    // PEGA AQUÍ TU ENLACE DE GOOGLE SHEETS (CSV)
    const SHEET_URL = 'TU_URL_AQUI'; 

    let selections = {};

    async function fetchData() {
        try {
            const response = await fetch(SHEET_URL);
            const data = await response.text();
            const rows = data.split('\n').slice(1);
            const inventory = document.getElementById('inventory');
            inventory.innerHTML = '';

            rows.forEach((row, index) => {
                const cols = row.split(',');
                if(cols.length < 2) return;
                const [nombre, imagen, categoria] = cols;

                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <img src="${imagen.trim()}" onerror="this.src='https://via.placeholder.com/300x200?text=Monkey'">
                    <div class="card-body">
                        <h3>${nombre}</h3>
                        <small>${categoria || ''}</small>
                        <div class="qty-controls">
                            <button class="qty-btn" onclick="updateQty('${nombre}', -1, ${index})">-</button>
                            <span id="qty-val-${index}" style="font-weight:bold">0</span>
                            <button class="qty-btn" onclick="updateQty('${nombre}', 1, ${index})">+</button>
                        </div>
                    </div>
                `;
                inventory.appendChild(card);
            });
        } catch (e) {
            console.error("Error cargando datos", e);
        }
    }

    function updateQty(name, change, index) {
        selections[name] = Math.max(0, (selections[name] || 0) + change);
        document.getElementById(`qty-val-${index}`).innerText = selections[name];
        updateCart();
    }

    function updateCart() {
        let total = 0;
        let message = "¡Hola Monkey! Me interesa cotizar:\n";
        for (const [name, qty] of Object.entries(selections)) {
            if (qty > 0) {
                message += `- ${qty}x ${name}\n`;
                total += qty;
            }
        }
        
        const cart = document.getElementById('cart');
        document.getElementById('summary').innerText = `${total} artículos seleccionados`;
        cart.style.display = total > 0 ? 'flex' : 'none';
        
        // REEMPLAZA CON TU NÚMERO REAL
        const phone = "521234567890"; 
        document.getElementById('whatsappLink').href = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;
    }

    fetchData();
</script>
</body>
</html>